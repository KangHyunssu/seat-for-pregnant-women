# 스마트 임산부석 관리 시스템

본 프로젝트는 **RF24 무선 통신**, **초음파 센서**, 및 다양한 주변 모듈을 활용하여 임산부를 위한 전용 좌석을 관리하는 **스마트 임산부석 관리 시스템**을 개발하는 것을 목표로 합니다. 대중교통이나 대기 장소에서 임산부 전용 좌석의 상태를 모니터링하고 제어하며 유지 관리하기 위해 하드웨어와 소프트웨어를 통합한 시스템입니다.

---

## 주요 기능

- **실시간 상태 모니터링**  
  **초음파 센서**를 이용해 좌석의 사용 가능 여부와 상태를 실시간으로 확인합니다.

- **무선 신호 전송**  
  **NRF24L01 모듈**을 활용하여 송신부와 수신부 간의 원활한 통신을 제공합니다.

- **동적 장치 제어**  
  좌석 점유 상태 및 RF 신호에 따라 **LED**, **부저**, **진동 모터**를 제어합니다.

- **향상된 상태 관리**  
  상태 머신(State Machine)을 구현하여 시스템 동작을 정밀하게 관리합니다.

---

## 시스템 개요

### 1. **송신부**
- **구성 요소**:
  - 버튼
  - NRF24L01 모듈
  - LED
  - AMS1117 3.3V 레귤레이터
    ![image](https://github.com/user-attachments/assets/52dd2c46-1068-4fa0-95c2-e70d50cfecca)
    
- **기능**:
  - 버튼 입력을 통해 RF 통신으로 수신부에 `1`(활성화), `0`(비활성화) 신호를 전송합니다.
  - LED는 신호 전송 상태를 표시합니다.

### 2. **수신부**
- **구성 요소**:
  - NRF24L01 모듈
  - 초음파 센서
  - LED, 부저, 진동 모터
  - AMS1117 3.3V 레귤레이터
    ![image](https://github.com/user-attachments/assets/6a16c9f4-8d5b-4239-9680-76628ae063d0)

- **기능**:
  - RF 신호를 수신하여 좌석 상태를 관리합니다.
  - 초음파 센서를 이용해 좌석 점유 상태를 감지합니다.
  - 신호와 좌석 상태에 따라 장치(LED, 부저, 모터)를 제어합니다.

---

## 기능 블록도

### 전체 시스템 구조
![image](https://github.com/user-attachments/assets/08bb188b-c0d8-45d8-9209-bc57a0e3eab8)

---

## 하드웨어 구성

- **라즈베리파이** (Model 4B)  
  시스템 제어 및 수신부 코드를 실행합니다.

- **NRF24L01 모듈**  
  송신부와 수신부 간 무선 통신을 지원합니다.

- **AMS1117 3.3V 레귤레이터**  
  NRF24L01 모듈에 안정적인 3.3V 전력을 공급합니다.

- **초음파 센서**  
  주변 물체와의 거리를 측정하여 좌석 점유 상태를 확인합니다.

- **주변 장치**  
  - **LED**: 좌석 상태를 시각적으로 표시합니다.
  - **부저**: 활성화 상태를 청각적으로 알립니다.
  - **진동 모터**: 특정 조건에서 진동 피드백을 제공합니다.

---

## 소프트웨어 개요

- **프로그래밍 언어**: C/C++  
  WiringPi 및 RF24 라이브러리를 활용하여 라즈베리파이에서 실행됩니다.

- **RF 통신**: NRF24L01 모듈을 통해 송신 및 수신 데이터를 처리합니다.

- **상태 머신 구현**:  
  `STATE_IDLE`, `STATE_ACTIVE`, `STATE_LED_ONLY` 상태를 기반으로 각 상황에서 적절한 장치 제어를 수행합니다.

---

## 실행 방법

1. **하드웨어 구성**  
   - 송신부와 수신부에 각 구성 요소를 배치하고 연결합니다.  
   - 라즈베리파이에 WiringPi와 RF24 라이브러리를 설치합니다.

2. **코드 실행**  
   - 송신부: `sender.c` 실행  
   - 수신부: `receiver.c` 실행

3. **테스트 및 디버깅**  
   - 초음파 센서를 이용해 거리 기반 좌석 점유 상태 확인  
   - 송신 신호와 수신 동작이 정상적으로 수행되는지 테스트합니다.

---

## 프로젝트 구성 파일

- `sender.c`: 송신부 코드  
- `receiver.c`: 수신부 코드  
- `README.md`: 프로젝트 개요 및 설명   

---

## 참고 자료

- NRF24L01 무선 통신 모듈 문서  
- 라즈베리파이 공식 문서  
- WiringPi 및 SoftTone 라이브러리 문서  
